<style>
    * {

        user-select: none;

        -webkit-user-select: none;

        font-family: Helvetica, Arial, sans-serif;

    }

    body {

        width: 100vw;

        height: 100vh;

        margin: 0;

        overflow: hidden;

    }

    canvas {

        cursor: grab;

    }

    canvas:active {

        cursor: grabbing;

    }

    #loading {

        position: fixed;

        width: 100vw;

        height: 100vh;

        top: 0;

        left: 0;

        background-color: #222;

        color: white;

        display: flex;

        text-align: center;

        align-items: center;

        justify-content: center;

        font-size: 20px;

        flex-direction: column;

    }

    #spin {

        width: 30vmin;

        height: 30vmin;

        border: 5vmin solid #AAD;

        border-radius: 50%;

        border-top-color: #FFF;

        animation: spin 1s linear infinite;

        margin: 5px;

    }

    @keyframes spin {

        to {
            transform: rotate(360deg);
        }

    }

    #instructions {

        position: fixed;

        padding: 5px;

        bottom: 10px;

        text-align: center;

        font-size: 18px;

    }
</style>

<script>
    //Wall of text explaining what this code does

    `"Gravitational waves are disturbances or ripples in the curvature of spacetime, generated by accelerated masses, that propagate as waves outward from their source at the speed of light."-Wikipedia



This code represents one such situation, where two celestial bodies orbit each other.

`;



    //Alert

    // alert("If the animation is laggy, turn the code off and on again");



    //Using strict

    "use strict";



    //Change this variable as needed... 

    var showGrid = false;



    //Math object

    const { PI, sqrt } = Math;



    window.onload = function () {



        let map, brush = new Image(), L = 1000;



        //Create Displacement Map

        let cnv = document.createElement("canvas");

        let ctx = cnv.getContext("2d");

        cnv.width = cnv.height = 510;

        for (let i = 0; i <= 255; i++) {

            let c = 255 - sqrt(255 * 255 - i * i) / 2;

            ctx.fillStyle = `rgb(${c},${c},${c})`;

            ctx.fillRect(255 + i - 0.5, 0, 1, 510);

            ctx.fillRect(255 - i - 0.5, 0, 1, 510);

        }

        brush.src = cnv.toDataURL();

        brush.onload = function () {

            cnv.width = cnv.height = L;

            ctx.fillStyle = "white";

            ctx.fillRect(0, 0, L, L);

            ctx.save();

            ctx.translate(L / 2, L / 2);

            for (let r = 0; r < 510; r += 0.02) {

                ctx.drawImage(brush, 25 + 25 * r, r * r / 2, 50, r * r);

                ctx.drawImage(brush, -75 - 25 * r, r * r / 2, 50, r * r);

                ctx.rotate(0.02);

            }

            ctx.restore();

            brush.src = cnv.toDataURL();

            brush.onload = () => {

                ctx.clearRect(0, 0, L, L);

                ctx.fillStyle = "rgb(255,0,0)";

                ctx.beginPath();

                ctx.arc(L / 2, L / 2, L / 2, 0, PI * 2);

                ctx.fill();

                ctx.globalCompositeOperation = "source-in";

                ctx.drawImage(brush, 0, 0);

                ctx.globalCompositeOperation = "destination-over";

                brush.src = cnv.toDataURL();

                brush.onload = createField;

            }

        }



        // SCENE

        var scene = new THREE.Scene();

        scene.background = new THREE.Color(0x222244);



        /* /////////////////////// */



        // CAMERA

        var camera = new THREE.PerspectiveCamera(80, window.innerWidth / window.innerHeight, .01, 800);

        camera.position.set(0, 2, 5);



        /* /////////////////////// */



        // RENDERER

        var renderer = new THREE.WebGLRenderer({ antialias: true });

        renderer.setSize(window.innerWidth, window.innerHeight);



        // Append canvas to the body

        document.body.appendChild(renderer.domElement);



        /* //////////////////// */



        // Camera Rotation Control

        var controls = new THREE.OrbitControls(camera, renderer.domElement);

        controls.enablePan = false;

        controls.minDistance = 3;

        controls.maxDistance = 9;

        controls.zoomSpeed = 0.5;



        if (showGrid) {

            const size = 10;

            const divisions = 10;



            const gridHelper = new THREE.GridHelper(size, divisions);

            scene.add(gridHelper);

        }





        //Create Stars

        let stars = new THREE.Group();

        let starGeo = new THREE.SphereGeometry(0.5, 32, 16);

        let starMat = new THREE.MeshBasicMaterial({

            color: 0xFFFFFF,

        });

        let glowMat = new THREE.MeshBasicMaterial({

            color: 0x7DF9FF,

            side: THREE.BackSide,

        });

        for (let i = 0; i < 2; i++) {

            let s = new THREE.Mesh(starGeo, starMat);

            s.position.x = [0.9, -0.9][i];

            s.position.z = [0.9, -0.9][i];

            s.scale.set(0.94, 0.94, 0.94);

            stars.add(s);

            let g = new THREE.Mesh(starGeo, glowMat);

            g.position.x = [0.9, -0.9][i];

            g.position.z = [0.9, -0.9][i];

            stars.add(g);

        }

        scene.add(stars);



        //Create Spacetime field

        let field;

        function createField() {

            map = new THREE.CanvasTexture(cnv);

            let fieldGeo = new THREE.PlaneGeometry(20, 20, 100, 100);

            let fieldMat = new THREE.MeshStandardMaterial({

                map: map,

                displacementMap: map,

                color: 0x7DF9FF,

                wireframe: true,

                transparent: true,

                displacementScale: 2,

            });

            field = new THREE.Mesh(fieldGeo, fieldMat);

            field.rotation.x = -PI / 2;

            field.position.y = -2.3;

            scene.add(field);



            //Change loading page text

            let loadtext = document.getElementById("loadtext");

            loadtext.textContent = "Loading Background (2/2)";



            //Download background, which I got from https://blenderartists.org/t/space-hdri/649981/4

            const hdrEquirect = new THREE.TextureLoader().load("https://dl.dropbox.com/s/8zwi5if6brhhkc7/a698e94891cef24f90c7962510e00cf1010a1a42_2_1380x776.jpeg?dl=0", () => {

                hdrEquirect.mapping = THREE.EquirectangularReflectionMapping;

                scene.background = hdrEquirect;

                //Remove loading page

                removeLoader();

            });

        }



        //Add light to scene

        scene.add(new THREE.AmbientLight());



        //Function to remove loading page

        function removeLoader() {

            let l = document.getElementById("loading");

            l.parentNode.removeChild(l);

            render();

        }



        /* ////////////////////// */



        // Render animation on every rendering phase

        let rotation = 0;

        function render() {

            requestAnimationFrame(render);

            renderer.render(scene, camera); // Render Scene and Camera

            controls.update(); // For Orbit Controller

            //Main animation below

            stars.rotation.y = -rotation;

            map.needsUpdate = true;

            ctx.clearRect(0, 0, L, L);

            ctx.save();

            ctx.translate(L / 2, L / 2);

            ctx.rotate(rotation);

            ctx.drawImage(brush, -L / 2, -L / 2);

            ctx.restore();

            rotation -= 0.05;

            if (rotation < -2 * PI) rotation += 2 * PI;

        }





        /*////////////////////////*/



        // Update Camera Aspect Ratio and Renderer ScreenSize on Window resize

        window.addEventListener('resize', function () {

            camera.aspect = window.innerWidth / window.innerHeight;

            camera.updateProjectionMatrix();

            renderer.setSize(window.innerWidth, window.innerHeight);

        }, false);

    }

    /*//////////////////////////*/



    "★"; //Patrick says hi.</script>

<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Gravitational Wave</title>

    <script src="https://cdn.jsdelivr.net/npm/three@0.145.0/build/three.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/three@0.145.0/examples/js/controls/OrbitControls.js"></script>

</head>

<body>

    <div id="loading">

        <div id="spin"></div><br>

        <i id="loadtext">Generating Spacetime Field (1/2)</i>

        <div id="instructions">Drag to rotate the scene!</div>

    </div>

</body>

</html>